@model DoableFinal.ViewModels.ContentPageViewModel
@{
    ViewData["Title"] = "Our Services";
    var sections = ViewBag.Sections as List<DoableFinal.Models.HomePageSection> ?? new List<DoableFinal.Models.HomePageSection>();
    
    var heroTitle = sections.FirstOrDefault(s => s.SectionKey == "services-hero-title")?.Content ?? "<h1 class=\"display-4 fw-bold mb-4\">Our Services</h1>";
    var heroBody = sections.FirstOrDefault(s => s.SectionKey == "services-hero-body")?.Content ?? "<p class=\"lead\">Comprehensive project management solutions tailored to your needs.</p>";
    var heroImage = sections.FirstOrDefault(s => s.SectionKey == "services-hero-image")?.ImagePath;
    
    var coreTitle = sections.FirstOrDefault(s => s.SectionKey == "services-core-title")?.Content ?? "Core Services";
    
    // Core Service Cards
    var service1Title = sections.FirstOrDefault(s => s.SectionKey == "services-service1-title")?.Content ?? "Task Management";
    var service1Body = sections.FirstOrDefault(s => s.SectionKey == "services-service1-body")?.Content ?? "Organize and track tasks with our intuitive Kanban board system. Set priorities, deadlines, and dependencies to keep your projects on track.";
    
    var service2Title = sections.FirstOrDefault(s => s.SectionKey == "services-service2-title")?.Content ?? "Team Collaboration";
    var service2Body = sections.FirstOrDefault(s => s.SectionKey == "services-service2-body")?.Content ?? "Foster seamless communication with real-time updates, file sharing, and team discussions. Keep everyone aligned and informed.";
    
    var service3Title = sections.FirstOrDefault(s => s.SectionKey == "services-service3-title")?.Content ?? "Progress Tracking";
    var service3Body = sections.FirstOrDefault(s => s.SectionKey == "services-service3-body")?.Content ?? "Monitor project progress with detailed analytics, milestone tracking, and performance metrics. Make data-driven decisions.";
    
    var pricingTitle = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-title")?.Content ?? "Software Pricing";
    
    // Pricing Plans
    var standardTitle = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-standard-title")?.Content ?? "STANDARD";
    var standardPrice = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-standard-price")?.Content ?? "₱2,999.00 / month / location";
    var standardUsers = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-standard-users")?.Content ?? "3 users (₱500.00/additional user)";
    var standardSupport = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-standard-support")?.Content ?? "Email/Viber chat support";
    var standardFeatures = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-standard-features")?.Content ?? "✔ Dashboard, Vehicle Management, Estimates\n✔ Job Orders, Invoices, Appointments\n✔ Customer & Supplier Management\n✔ Accounting (Chart of Accounts, P&L, Balance Sheet)\n✔ Reports (Sales, Service, Mechanic, Top Products)\n✔ 50 Free SMS/month";
    var standardFee = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-standard-fee")?.Content ?? "One-time implementation fee of ₱20,000.00";
    
    var eliteTitle = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-elite-title")?.Content ?? "ELITE";
    var elitePrice = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-elite-price")?.Content ?? "₱3,999.00 / month / location";
    var eliteUsers = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-elite-users")?.Content ?? "5 users (₱500.00/additional user)";
    var eliteSupport = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-elite-support")?.Content ?? "Email/Viber chat support";
    var eliteFeatures = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-elite-features")?.Content ?? "✔ 100 Free SMS/month & Custom Sender ID\n✔ Automated SMS Service Reminders\n✔ Loyalty and Memberships\n✔ Barcoding & Online Payments (Future)\n✔ Supplier & Customer Portals (Future)\n✔ Stock Transfer & Inventory Forecasting (Future)\n✔ Payroll (Future), BIR CAS";
    var eliteFee = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-elite-fee")?.Content ?? "One-time implementation fee of ₱30,000.00";
    
    var enterpriseTitle = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-enterprise-title")?.Content ?? "ENTERPRISE";
    var enterprisePrice = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-enterprise-price")?.Content ?? "Custom Pricing";
    var enterpriseBranches = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-enterprise-branches")?.Content ?? "Minimum of 10 branches";
    var enterpriseUsers = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-enterprise-users")?.Content ?? "10 users (₱300.00/additional user)";
    var enterpriseSupport = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-enterprise-support")?.Content ?? "Email/Viber chat/Phone support";
    var enterpriseFeatures = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-enterprise-features")?.Content ?? "✔ Dedicated Server Instance\n✔ Customized Printout & Inspection Templates\n✔ Customized Software Branding\n✔ Multi-Location Management & Reports\n✔ API Access";
    var enterpriseFee = sections.FirstOrDefault(s => s.SectionKey == "services-pricing-enterprise-fee")?.Content ?? "Call us for customized pricing";
    
    var featuresTitle = sections.FirstOrDefault(s => s.SectionKey == "services-features-title")?.Content ?? "Additional Features";
    
    // Additional Features
    var feature1Title = sections.FirstOrDefault(s => s.SectionKey == "services-feature1-title")?.Content ?? "Security & Compliance";
    var feature1Body = sections.FirstOrDefault(s => s.SectionKey == "services-feature1-body")?.Content ?? "Enterprise-grade security with data encryption, role-based access control, and compliance with industry standards.";
    
    var feature2Title = sections.FirstOrDefault(s => s.SectionKey == "services-feature2-title")?.Content ?? "Mobile Access";
    var feature2Body = sections.FirstOrDefault(s => s.SectionKey == "services-feature2-body")?.Content ?? "Access your projects on the go with our mobile-friendly interface and native mobile apps.";
    
    var feature3Title = sections.FirstOrDefault(s => s.SectionKey == "services-feature3-title")?.Content ?? "Time Tracking";
    var feature3Body = sections.FirstOrDefault(s => s.SectionKey == "services-feature3-body")?.Content ?? "Track time spent on tasks and projects with our integrated time tracking feature.";
    
    var feature4Title = sections.FirstOrDefault(s => s.SectionKey == "services-feature4-title")?.Content ?? "Reporting";
    var feature4Body = sections.FirstOrDefault(s => s.SectionKey == "services-feature4-body")?.Content ?? "Generate comprehensive reports and insights to make informed decisions.";
}

@if (User.Identity?.IsAuthenticated == true && User.IsInRole("Admin"))
{
    <div class="alert alert-info mb-0">
        <a asp-controller="Admin" asp-action="ManageServicesPage" class="btn btn-sm btn-primary">Edit Services Content</a>
    </div>
}

<!-- Services Hero Section -->
<section class="bg-light py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-4">@Html.Raw(heroTitle)</h1>
                <p class="lead">@Html.Raw(heroBody)</p>
            </div>
            <div class="col-lg-6 text-center">
                @if (!string.IsNullOrEmpty(heroImage))
                {
                    <img src="@heroImage" alt="Our Services" class="img-fluid">
                }
            </div>
        </div>
    </div>
</section>

<!-- Core Services Section -->
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-5">@coreTitle</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body p-4">
                        <i class="bi bi-kanban display-4 text-primary mb-3"></i>
                        <h3 class="h5">@service1Title</h3>
                        <p>@service1Body</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body p-4">
                        <i class="bi bi-people display-4 text-primary mb-3"></i>
                        <h3 class="h5">@service2Title</h3>
                        <p>@service2Body</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body p-4">
                        <i class="bi bi-graph-up display-4 text-primary mb-3"></i>
                        <h3 class="h5">@service3Title</h3>
                        <p>@service3Body</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Pricing Plans Section -->
<section class="bg-light py-5">
    <div class="container">
        <h2 class="text-center mb-5">@pricingTitle</h2>
        <div class="row g-4">

            <!-- STANDARD PLAN -->
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body p-4 text-center">
                        <h3 class="h4 text-primary mb-3">@standardTitle</h3>
                        <p class="fw-bold mb-1">@standardPrice</p>
                        <p>@standardUsers</p>
                        <p class="small text-muted mb-4">@standardSupport</p>

                        <h5 class="text-start mb-3">Features</h5>
                        <ul class="text-start small list-unstyled">
                            @foreach(var line in standardFeatures.Split('\n'))
                            {
                                <li>@line</li>
                            }
                        </ul>
                        <p class="fw-bold mt-3">@standardFee</p>
                    </div>
                </div>
            </div>

            <!-- ELITE PLAN -->
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm border-primary position-relative">
                    <div class="position-absolute top-0 start-50 translate-middle">
                        <span class="badge bg-primary">Popular</span>
                    </div>
                    <div class="card-body p-4 text-center">
                        <h3 class="h4 text-warning mb-3">@eliteTitle</h3>
                        <p class="fw-bold mb-1">@elitePrice</p>
                        <p>@eliteUsers</p>
                        <p class="small text-muted mb-4">@eliteSupport</p>

                        <h5 class="text-start mb-3">Includes all STANDARD features plus:</h5>
                        <ul class="text-start small list-unstyled">
                            @foreach(var line in eliteFeatures.Split('\n'))
                            {
                                <li>@line</li>
                            }
                        </ul>
                        <p class="fw-bold mt-3">@eliteFee</p>
                    </div>
                </div>
            </div>

            <!-- ENTERPRISE PLAN -->
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body p-4 text-center">
                        <h3 class="h4 text-success mb-3">@enterpriseTitle</h3>
                        <p class="fw-bold mb-1">@enterprisePrice</p>
                        <p>@enterpriseBranches</p>
                        <p>@enterpriseUsers</p>
                        <p class="small text-muted mb-4">@enterpriseSupport</p>

                        <h5 class="text-start mb-3">Includes all ELITE features plus:</h5>
                        <ul class="text-start small list-unstyled">
                            @foreach(var line in enterpriseFeatures.Split('\n'))
                            {
                                <li>@line</li>
                            }
                        </ul>
                        <p class="fw-bold mt-3">@enterpriseFee</p>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>

<!-- Additional Features Section -->
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-5">@featuresTitle</h2>
        <div class="row g-4">
            <div class="col-md-6">
                <div class="d-flex align-items-start">
                    <i class="bi bi-shield-check text-primary me-3 fs-4"></i>
                    <div>
                        <h4 class="h5">@feature1Title</h4>
                        <p>@feature1Body</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="d-flex align-items-start">
                    <i class="bi bi-phone text-primary me-3 fs-4"></i>
                    <div>
                        <h4 class="h5">@feature2Title</h4>
                        <p>@feature2Body</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="d-flex align-items-start">
                    <i class="bi bi-clock-history text-primary me-3 fs-4"></i>
                    <div>
                        <h4 class="h5">@feature3Title</h4>
                        <p>@feature3Body</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="d-flex align-items-start">
                    <i class="bi bi-file-earmark-text text-primary me-3 fs-4"></i>
                    <div>
                        <h4 class="h5">@feature4Title</h4>
                        <p>@feature4Body</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
