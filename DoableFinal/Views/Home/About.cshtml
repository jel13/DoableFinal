@{
    ViewData["Title"] = "About Us";
    
    // Extract sections from ViewBag - using CMS database content
    var sections = ViewBag.Sections as List<DoableFinal.Models.HomePageSection> ?? new List<DoableFinal.Models.HomePageSection>();
    
    var heroTitle = sections?.FirstOrDefault(s => s.SectionKey == "about-hero-title")?.Content ?? "About Doable";
    var heroBody = sections?.FirstOrDefault(s => s.SectionKey == "about-hero-body")?.Content ?? "We're committed to excellence";
    
    var storyTitle = sections?.FirstOrDefault(s => s.SectionKey == "about-story-title")?.Content ?? "Our Story";
    var storyIntro = sections?.FirstOrDefault(s => s.SectionKey == "about-story-intro")?.Content ?? "";
    var storyContent = sections?.FirstOrDefault(s => s.SectionKey == "about-story-content")?.Content ?? "";
    
    var missionTitle = sections?.FirstOrDefault(s => s.SectionKey == "about-mission-title")?.Content ?? "Our Mission";
    var missionContent = sections?.FirstOrDefault(s => s.SectionKey == "about-mission-content")?.Content ?? "";
    
    var valuesTitle = sections?.FirstOrDefault(s => s.SectionKey == "about-values-title")?.Content ?? "Our Core Values";
    
    var value1Title = sections?.FirstOrDefault(s => s.SectionKey == "about-value-1-title")?.Content ?? "Innovation";
    var value1Body = sections?.FirstOrDefault(s => s.SectionKey == "about-value-1-body")?.Content ?? "";
    
    var value2Title = sections?.FirstOrDefault(s => s.SectionKey == "about-value-2-title")?.Content ?? "Collaboration";
    var value2Body = sections?.FirstOrDefault(s => s.SectionKey == "about-value-2-body")?.Content ?? "";
    
    var value3Title = sections?.FirstOrDefault(s => s.SectionKey == "about-value-3-title")?.Content ?? "Integrity";
    var value3Body = sections?.FirstOrDefault(s => s.SectionKey == "about-value-3-body")?.Content ?? "";
}

<!-- Edit About Content Button -->
@if (User.IsInRole("Admin") || User.IsInRole("ProjectManager"))
{
    <div class="alert alert-info mb-4">
        <a href="@Url.Action("ManageAboutPage", "Admin")" class="btn btn-primary btn-sm">
            <i class="bi bi-pencil-square"></i> Edit About Content
        </a>
    </div>
}

<!-- Hero Section -->
<section class="hero-section py-5 bg-primary" style="color: white;">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="display-4 mb-4 fw-bold">@Html.Raw(heroTitle)</h1>
                <p class="lead">@Html.Raw(heroBody)</p>
            </div>
        </div>
    </div>
</section>

<!-- Our Story Section -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <div class="mb-5">
                    <h2 class="mb-4">@Html.Raw(storyTitle)</h2>
                    @if (!string.IsNullOrEmpty(storyIntro?.ToString()))
                    {
                        <p class="lead mb-4">@Html.Raw(storyIntro)</p>
                    }
                    <div class="story-content">
                        @Html.Raw(storyContent)
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Mission Section -->
<section class="py-5" style="background-color: #f8f9fa;">
    <div class="container">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <h2 class="mb-4">@Html.Raw(missionTitle)</h2>
                <div class="mission-content p-4" style="background-color: white; border-left: 4px solid #ff4f19ff; border-radius: 4px;">
                    <p class="lead">@Html.Raw(missionContent)</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Core Values Section -->
<section class="py-5">
    <div class="container">
        <div class="row mb-5">
            <div class="col-lg-10 mx-auto">
                <h2 class="text-center mb-5">@Html.Raw(valuesTitle)</h2>
            </div>
        </div>
        <div class="row g-4">
            <!-- Value 1 -->
            <div class="col-lg-4">
                <div class="card h-100 shadow-sm border-0 hover-lift" style="transition: transform 0.3s;">
                    <div class="card-body text-center p-4">
                        <h3 class="card-title mb-3" style="color: #ff4f19ff;">@Html.Raw(value1Title)</h3>
                        <p class="card-text">@Html.Raw(value1Body)</p>
                    </div>
                </div>
            </div>
            
            <!-- Value 2 -->
            <div class="col-lg-4">
                <div class="card h-100 shadow-sm border-0 hover-lift" style="transition: transform 0.3s;">
                    <div class="card-body text-center p-4">
                        <h3 class="card-title mb-3" style="color: #ff4f19ff;">@Html.Raw(value2Title)</h3>
                        <p class="card-text">@Html.Raw(value2Body)</p>
                    </div>
                </div>
            </div>
            
            <!-- Value 3 -->
            <div class="col-lg-4">
                <div class="card h-100 shadow-sm border-0 hover-lift" style="transition: transform 0.3s;">
                    <div class="card-body text-center p-4">
                        <h3 class="card-title mb-3" style="color: #ff4f19ff;">@Html.Raw(value3Title)</h3>
                        <p class="card-text">@Html.Raw(value3Body)</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    .hover-lift:hover {
        transform: translateY(-5px);
    }
    
    .story-content p {
        margin-bottom: 1.5rem;
        line-height: 1.8;
    }
    
    .mission-content p {
        margin-bottom: 1rem;
        line-height: 1.8;
    }
</style>
